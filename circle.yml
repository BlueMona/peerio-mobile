general:
  build_dir: ios
  
machine:
  environment:
    XCODE_SCHEME: peeriomobile
    PATH: '$PATH:$HOME/node/node-v7.3.0-darwin-x64/bin'
  xcode:
    version: 8.0

dependencies:
  cache_directories:
    - "$HOME/node"
  pre:
    - "ls \"$HOME/node/node-v7.3.0-darwin-x64\" || mkdir \"$HOME/node\""
    - "ls \"$HOME/node/node-v7.3.0-darwin-x64\" || curl -L \"https://nodejs.org/dist/v7.3.0/node-v7.3.0-darwin-x64.tar.gz\" -o \"$HOME/node/node-v7.3.0-darwin-x64.tar.gz\""
    - "ls \"$HOME/node/node-v7.3.0-darwin-x64\" || tar -xzf \"$HOME/node/node-v7.3.0-darwin-x64.tar.gz\" -C \"$HOME/node/\""
    - "rm -f \"$HOME/node/node-v7.3.0-darwin-x64.tar.gz\""
    - "ls \"$HOME/node/node-v7.3.0-darwin-x64\""
    - "echo $PATH"
    - "pwd"
    - "cd .. && npm install && cd ios"
    - pip install Appium-Python-Client==0.22
    - pip install jsonpickle==0.9.3
    - pip install macholib==1.5.1
    - pip install pyparsing==2.0.1
    - pip install pytest==2.9.1
    - pip install selenium==2.53.1
    - pip install tornado==4.3
    - pip install websocket-client==0.37.0
    - pip install pycurl==7.43.0
    - pip install termcolor==1.1.0

    
test:
  post:
    - "cd .. && npm test"
    